# 🎨 Sprite Sheet 生成器 - Streamlit Web UI

## 🚀 快速開始

### 方法 1：一鍵啟動（Windows）
```batch
# 雙擊運行
run_ui.bat
```

### 方法 2：Python 啟動
```bash
# 安裝依賴
python simple_install.py

# 啟動 Web UI
python run_ui.py
```

### 方法 3：直接運行 Streamlit
```bash
# 安裝 Streamlit
pip install streamlit

# 啟動應用
streamlit run streamlit_app.py
```

## 🌐 Web UI 功能

### 📱 主要界面

**左側主要區域**：
- 🎭 **角色設置** - 輸入角色描述和選擇藝術風格
- 🎬 **動畫設置** - 配置動畫類型、幀數和尺寸
- ⚙️ **高級設置** - 調整生成參數和負面提示詞

**右側控制區域**：
- 🎮 **生成控制** - 一鍵生成按鈕和狀態顯示
- 💡 **範例提示詞** - 預設角色範例
- 📥 **下載功能** - 生成完成後可下載結果

**側邊欄**：
- 🔧 **系統設置** - 設備選擇和記憶體優化
- 📊 **系統狀態** - GPU 信息和模型狀態
- 💾 **記憶體設置** - CPU 卸載和低顯存模式

### 🎯 核心功能

1. **圖形化參數設置**
   - 滑桿調整數值參數
   - 下拉選單選擇選項
   - 文本框輸入描述
   - 勾選框啟用功能

2. **實時狀態顯示**
   - 生成進度條
   - 系統資源監控
   - 錯誤信息顯示
   - 成功狀態反饋

3. **一鍵下載**
   - PNG 格式輸出
   - 自動命名檔案
   - 瀏覽器下載
   - 多種尺寸支援

## 📋 詳細操作流程

### 步驟 1：初始化系統
1. 在側邊欄選擇計算設備（auto/cuda/cpu）
2. 配置記憶體設置（根據您的硬體）
3. 點擊「🚀 初始化/重新載入模型」
4. 等待模型載入完成（首次需要下載 4-6GB）

### 步驟 2：設置角色
1. 在「角色描述」文本區域輸入詳細的角色描述
2. 選擇藝術風格（像素藝術、卡通、奇幻等）
3. 或選擇「自訂」並輸入自己的風格描述

### 步驟 3：配置動畫
1. 選擇動畫類型：
   - 待機 (Idle) - 靜態呼吸動畫
   - 行走 (Walk) - 標準行走循環
   - 跑步 (Run) - 快速移動
   - 跳躍 (Jump) - 跳躍序列
   - 攻擊 (Attack) - 攻擊動作
2. 調整動畫幀數（4-16 幀）
3. 設置精靈尺寸（32x32 到 512x512）
4. 選擇 Sprite Sheet 列數

### 步驟 4：調整高級參數（可選）
1. 修改負面提示詞
2. 調整推理步數（品質 vs 速度）
3. 設置引導強度（遵循提示詞程度）
4. 選擇隨機種子（可重現結果）
5. 自訂生成尺寸

### 步驟 5：生成和下載
1. 點擊「🎨 生成 Sprite Sheet」
2. 觀察生成進度和狀態
3. 生成完成後查看結果
4. 點擊「📥 下載 Sprite Sheet」保存檔案

## 🎛️ 參數說明

### 角色設置
- **角色描述**: 詳細描述角色外觀、服裝、武器等
- **藝術風格**: 影響整體視覺風格和渲染方式

### 動畫設置
- **動畫類型**: 決定姿勢序列和動作模式
- **幀數**: 更多幀 = 更流暢動畫，但生成時間更長
- **精靈尺寸**: 最終每個精靈的像素尺寸
- **列數**: Sprite Sheet 的水平排列數量

### 高級參數
- **負面提示詞**: 避免不想要的元素出現
- **推理步數**: 10-20 快速，25-30 平衡，35-50 高品質
- **引導強度**: 1-5 創意，6-10 平衡，11-20 嚴格遵循
- **隨機種子**: 相同種子產生相同結果

### 系統設置
- **計算設備**: auto（自動），cuda（GPU），cpu（CPU）
- **CPU 卸載**: 減少 GPU 記憶體使用
- **低顯存模式**: 適用於 4GB 以下顯卡
- **模型優化**: 啟用 PyTorch 原生優化

## 💡 使用技巧

### 提示詞優化
```
好的範例:
"pixel art medieval knight with silver armor, blue cape, sword and shield, facing forward"

避免的描述:
"knight" (太簡單)
"a very detailed beautiful knight warrior" (太抽象)
```

### 性能優化
- **GPU 用戶**: 使用 CUDA，啟用模型優化
- **低顯存**: 啟用 CPU 卸載和低顯存模式
- **CPU 用戶**: 選擇 CPU 設備，減少幀數和尺寸

### 品質控制
- **高品質**: 增加推理步數，提高引導強度
- **快速生成**: 減少推理步數，使用較小尺寸
- **一致性**: 使用相同的隨機種子

## 🚨 常見問題

### Q: 模型載入失敗
A: 檢查網路連接，確保有足夠硬碟空間（20GB+）

### Q: 生成很慢
A: 嘗試啟用 CPU 卸載，減少幀數，或使用 GPU

### Q: 記憶體不足
A: 啟用低顯存模式，減少生成尺寸，關閉其他程序

### Q: 結果不理想
A: 優化提示詞描述，調整引導強度，嘗試不同隨機種子

### Q: 無法下載
A: 檢查瀏覽器下載設置，確認檔案生成成功

## 🔧 系統要求

### 最低配置
- Python 3.8+
- 8GB 系統記憶體
- 20GB 硬碟空間
- 現代瀏覽器

### 推薦配置
- Python 3.9+
- NVIDIA GPU (6GB+ 顯存)
- 16GB+ 系統記憶體
- SSD 硬碟
- Chrome/Firefox 瀏覽器

## 📁 文件結構

```
sprite-gen/
├── streamlit_app.py          # 主要 Web UI 應用
├── run_ui.py                 # Python 啟動腳本
├── run_ui.bat               # Windows 批次文件
├── sprite_gen_no_xformers.py # 後端生成器
├── pose_manipulation.py     # 姿勢操作模組
├── requirements_no_xformers.txt # 依賴列表
└── simple_install.py        # 安裝腳本
```

## 🎉 享受創作！

現在您可以通過友好的 Web 界面創建專業級的遊戲 Sprite Sheet，無需複雜的命令行操作！ 