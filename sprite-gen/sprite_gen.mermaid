graph TB
    A["🎮 輸入角色圖像"] --> B["📊 分析圖像特徵"]
    B --> C["🎯 提取姿勢關鍵點"]
    C --> D["📋 選擇動畫類型"]
    
    D --> E1["🚶 行走動畫"]
    D --> E2["🏃 跳躍動畫"] 
    D --> E3["⚔️ 攻擊動畫"]
    D --> E4["🧍 待機動畫"]
    
    E1 --> F1["生成8個行走幀"]
    E2 --> F2["生成6個跳躍幀"]
    E3 --> F3["生成4個攻擊幀"]
    E4 --> F4["生成1個待機幀"]
    
    F1 --> G["🎨 ControlNet + SD 生成"]
    F2 --> G
    F3 --> G
    F4 --> G
    
    G --> H["🖼️ 圖像後處理"]
    H --> I["📐 調整為統一尺寸"]
    I --> J["🗂️ 排列為 Sprite Sheet"]
    J --> K["📊 生成元數據文件"]
    
    K --> L["✅ 輸出完成"]
    L --> M["🎯 可用於遊戲引擎"]
    
    subgraph "姿勢操作詳細流程"
        C --> C1["檢測17個關鍵點"]
        C1 --> C2["計算骨架連接"]
        C2 --> C3["應用動畫變換"]
        C3 --> C4["生成姿勢序列"]
    end
    
    subgraph "AI 生成詳細流程"  
        G --> G1["載入 Stable Diffusion"]
        G1 --> G2["載入 ControlNet"]
        G2 --> G3["輸入姿勢控制圖"]
        G3 --> G4["文本提示詞"]
        G4 --> G5["執行去噪過程"]
        G5 --> G6["生成最終圖像"]
    end
    
    subgraph "輸出格式"
        L --> O1["🖼️ sprite_sheet.png"]
        L --> O2["📋 metadata.json"]
        L --> O3["📁 individual_frames/"]
    end